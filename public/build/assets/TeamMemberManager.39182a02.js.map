{"version":3,"file":"TeamMemberManager.39182a02.js","sources":["../../../resources/js/Pages/Teams/Partials/TeamMemberManager.vue"],"sourcesContent":["<script setup>\nimport { ref } from 'vue';\nimport { Inertia } from '@inertiajs/inertia';\nimport { useForm, usePage } from '@inertiajs/inertia-vue3';\nimport JetActionMessage from '@/Jetstream/ActionMessage.vue';\nimport JetActionSection from '@/Jetstream/ActionSection.vue';\nimport JetButton from '@/Jetstream/Button.vue';\nimport JetConfirmationModal from '@/Jetstream/ConfirmationModal.vue';\nimport JetDangerButton from '@/Jetstream/DangerButton.vue';\nimport JetDialogModal from '@/Jetstream/DialogModal.vue';\nimport JetFormSection from '@/Jetstream/FormSection.vue';\nimport JetInput from '@/Jetstream/Input.vue';\nimport JetInputError from '@/Jetstream/InputError.vue';\nimport JetLabel from '@/Jetstream/Label.vue';\nimport JetSecondaryButton from '@/Jetstream/SecondaryButton.vue';\nimport JetSectionBorder from '@/Jetstream/SectionBorder.vue';\n\nconst props = defineProps({\n    team: Object,\n    availableRoles: Array,\n    userPermissions: Object,\n});\n\nconst addTeamMemberForm = useForm({\n    email: '',\n    role: null,\n});\n\nconst updateRoleForm = useForm({\n    role: null,\n});\n\nconst leaveTeamForm = useForm();\nconst removeTeamMemberForm = useForm();\n\nconst currentlyManagingRole = ref(false);\nconst managingRoleFor = ref(null);\nconst confirmingLeavingTeam = ref(false);\nconst teamMemberBeingRemoved = ref(null);\n\nconst addTeamMember = () => {\n    addTeamMemberForm.post(route('team-members.store', props.team), {\n        errorBag: 'addTeamMember',\n        preserveScroll: true,\n        onSuccess: () => addTeamMemberForm.reset(),\n    });\n};\n\nconst cancelTeamInvitation = (invitation) => {\n    Inertia.delete(route('team-invitations.destroy', invitation), {\n        preserveScroll: true,\n    });\n};\n\nconst manageRole = (teamMember) => {\n    managingRoleFor.value = teamMember;\n    updateRoleForm.role = teamMember.membership.role;\n    currentlyManagingRole.value = true;\n};\n\nconst updateRole = () => {\n    updateRoleForm.put(route('team-members.update', [props.team, managingRoleFor.value]), {\n        preserveScroll: true,\n        onSuccess: () => currentlyManagingRole.value = false,\n    });\n};\n\nconst confirmLeavingTeam = () => {\n    confirmingLeavingTeam.value = true;\n};\n\nconst leaveTeam = () => {\n    leaveTeamForm.delete(route('team-members.destroy', [props.team, usePage().props.value.user]));\n};\n\nconst confirmTeamMemberRemoval = (teamMember) => {\n    teamMemberBeingRemoved.value = teamMember;\n};\n\nconst removeTeamMember = () => {\n    removeTeamMemberForm.delete(route('team-members.destroy', [props.team, teamMemberBeingRemoved.value]), {\n        errorBag: 'removeTeamMember',\n        preserveScroll: true,\n        preserveState: true,\n        onSuccess: () => teamMemberBeingRemoved.value = null,\n    });\n};\n\nconst displayableRole = (role) => {\n    return props.availableRoles.find(r => r.key === role).name;\n};\n</script>\n\n<template>\n    <div>\n        <div v-if=\"userPermissions.canAddTeamMembers\">\n            <JetSectionBorder />\n\n            <!-- Add Team Member -->\n            <JetFormSection @submitted=\"addTeamMember\">\n                <template #title>\n                    Add Team Member\n                </template>\n\n                <template #description>\n                    Add a new team member to your team, allowing them to collaborate with you.\n                </template>\n\n                <template #form>\n                    <div class=\"col-span-6\">\n                        <div class=\"max-w-xl text-sm text-gray-600\">\n                            Please provide the email address of the person you would like to add to this team.\n                        </div>\n                    </div>\n\n                    <!-- Member Email -->\n                    <div class=\"col-span-6 sm:col-span-4\">\n                        <JetLabel for=\"email\" value=\"Email\" />\n                        <JetInput\n                            id=\"email\"\n                            v-model=\"addTeamMemberForm.email\"\n                            type=\"email\"\n                            class=\"mt-1 block w-full\"\n                        />\n                        <JetInputError :message=\"addTeamMemberForm.errors.email\" class=\"mt-2\" />\n                    </div>\n\n                    <!-- Role -->\n                    <div v-if=\"availableRoles.length > 0\" class=\"col-span-6 lg:col-span-4\">\n                        <JetLabel for=\"roles\" value=\"Role\" />\n                        <JetInputError :message=\"addTeamMemberForm.errors.role\" class=\"mt-2\" />\n\n                        <div class=\"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer\">\n                            <button\n                                v-for=\"(role, i) in availableRoles\"\n                                :key=\"role.key\"\n                                type=\"button\"\n                                class=\"relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200\"\n                                :class=\"{'border-t border-gray-200 rounded-t-none': i > 0, 'rounded-b-none': i != Object.keys(availableRoles).length - 1}\"\n                                @click=\"addTeamMemberForm.role = role.key\"\n                            >\n                                <div :class=\"{'opacity-50': addTeamMemberForm.role && addTeamMemberForm.role != role.key}\">\n                                    <!-- Role Name -->\n                                    <div class=\"flex items-center\">\n                                        <div class=\"text-sm text-gray-600\" :class=\"{'font-semibold': addTeamMemberForm.role == role.key}\">\n                                            {{ role.name }}\n                                        </div>\n\n                                        <svg\n                                            v-if=\"addTeamMemberForm.role == role.key\"\n                                            class=\"ml-2 h-5 w-5 text-green-400\"\n                                            fill=\"none\"\n                                            stroke-linecap=\"round\"\n                                            stroke-linejoin=\"round\"\n                                            stroke-width=\"2\"\n                                            stroke=\"currentColor\"\n                                            viewBox=\"0 0 24 24\"\n                                        ><path d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n                                    </div>\n\n                                    <!-- Role Description -->\n                                    <div class=\"mt-2 text-xs text-gray-600 text-left\">\n                                        {{ role.description }}\n                                    </div>\n                                </div>\n                            </button>\n                        </div>\n                    </div>\n                </template>\n\n                <template #actions>\n                    <JetActionMessage :on=\"addTeamMemberForm.recentlySuccessful\" class=\"mr-3\">\n                        Added.\n                    </JetActionMessage>\n\n                    <JetButton :class=\"{ 'opacity-25': addTeamMemberForm.processing }\" :disabled=\"addTeamMemberForm.processing\">\n                        Add\n                    </JetButton>\n                </template>\n            </JetFormSection>\n        </div>\n\n        <div v-if=\"team.team_invitations.length > 0 && userPermissions.canAddTeamMembers\">\n            <JetSectionBorder />\n\n            <!-- Team Member Invitations -->\n            <JetActionSection class=\"mt-10 sm:mt-0\">\n                <template #title>\n                    Pending Team Invitations\n                </template>\n\n                <template #description>\n                    These people have been invited to your team and have been sent an invitation email. They may join the team by accepting the email invitation.\n                </template>\n\n                <!-- Pending Team Member Invitation List -->\n                <template #content>\n                    <div class=\"space-y-6\">\n                        <div v-for=\"invitation in team.team_invitations\" :key=\"invitation.id\" class=\"flex items-center justify-between\">\n                            <div class=\"text-gray-600\">\n                                {{ invitation.email }}\n                            </div>\n\n                            <div class=\"flex items-center\">\n                                <!-- Cancel Team Invitation -->\n                                <button\n                                    v-if=\"userPermissions.canRemoveTeamMembers\"\n                                    class=\"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none\"\n                                    @click=\"cancelTeamInvitation(invitation)\"\n                                >\n                                    Cancel\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </template>\n            </JetActionSection>\n        </div>\n\n        <div v-if=\"team.users.length > 0\">\n            <JetSectionBorder />\n\n            <!-- Manage Team Members -->\n            <JetActionSection class=\"mt-10 sm:mt-0\">\n                <template #title>\n                    Team Members\n                </template>\n\n                <template #description>\n                    All of the people that are part of this team.\n                </template>\n\n                <!-- Team Member List -->\n                <template #content>\n                    <div class=\"space-y-6\">\n                        <div v-for=\"user in team.users\" :key=\"user.id\" class=\"flex items-center justify-between\">\n                            <div class=\"flex items-center\">\n                                <img class=\"w-8 h-8 rounded-full\" :src=\"user.profile_photo_url\" :alt=\"user.name\">\n                                <div class=\"ml-4\">\n                                    {{ user.name }}\n                                </div>\n                            </div>\n\n                            <div class=\"flex items-center\">\n                                <!-- Manage Team Member Role -->\n                                <button\n                                    v-if=\"userPermissions.canAddTeamMembers && availableRoles.length\"\n                                    class=\"ml-2 text-sm text-gray-400 underline\"\n                                    @click=\"manageRole(user)\"\n                                >\n                                    {{ displayableRole(user.membership.role) }}\n                                </button>\n\n                                <div v-else-if=\"availableRoles.length\" class=\"ml-2 text-sm text-gray-400\">\n                                    {{ displayableRole(user.membership.role) }}\n                                </div>\n\n                                <!-- Leave Team -->\n                                <button\n                                    v-if=\"$page.props.user.id === user.id\"\n                                    class=\"cursor-pointer ml-6 text-sm text-red-500\"\n                                    @click=\"confirmLeavingTeam\"\n                                >\n                                    Leave\n                                </button>\n\n                                <!-- Remove Team Member -->\n                                <button\n                                    v-if=\"userPermissions.canRemoveTeamMembers\"\n                                    class=\"cursor-pointer ml-6 text-sm text-red-500\"\n                                    @click=\"confirmTeamMemberRemoval(user)\"\n                                >\n                                    Remove\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </template>\n            </JetActionSection>\n        </div>\n\n        <!-- Role Management Modal -->\n        <JetDialogModal :show=\"currentlyManagingRole\" @close=\"currentlyManagingRole = false\">\n            <template #title>\n                Manage Role\n            </template>\n\n            <template #content>\n                <div v-if=\"managingRoleFor\">\n                    <div class=\"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer\">\n                        <button\n                            v-for=\"(role, i) in availableRoles\"\n                            :key=\"role.key\"\n                            type=\"button\"\n                            class=\"relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200\"\n                            :class=\"{'border-t border-gray-200 rounded-t-none': i > 0, 'rounded-b-none': i !== Object.keys(availableRoles).length - 1}\"\n                            @click=\"updateRoleForm.role = role.key\"\n                        >\n                            <div :class=\"{'opacity-50': updateRoleForm.role && updateRoleForm.role !== role.key}\">\n                                <!-- Role Name -->\n                                <div class=\"flex items-center\">\n                                    <div class=\"text-sm text-gray-600\" :class=\"{'font-semibold': updateRoleForm.role === role.key}\">\n                                        {{ role.name }}\n                                    </div>\n\n                                    <svg\n                                        v-if=\"updateRoleForm.role === role.key\"\n                                        class=\"ml-2 h-5 w-5 text-green-400\"\n                                        fill=\"none\"\n                                        stroke-linecap=\"round\"\n                                        stroke-linejoin=\"round\"\n                                        stroke-width=\"2\"\n                                        stroke=\"currentColor\"\n                                        viewBox=\"0 0 24 24\"\n                                    ><path d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\n                                </div>\n\n                                <!-- Role Description -->\n                                <div class=\"mt-2 text-xs text-gray-600\">\n                                    {{ role.description }}\n                                </div>\n                            </div>\n                        </button>\n                    </div>\n                </div>\n            </template>\n\n            <template #footer>\n                <JetSecondaryButton @click=\"currentlyManagingRole = false\">\n                    Cancel\n                </JetSecondaryButton>\n\n                <JetButton\n                    class=\"ml-3\"\n                    :class=\"{ 'opacity-25': updateRoleForm.processing }\"\n                    :disabled=\"updateRoleForm.processing\"\n                    @click=\"updateRole\"\n                >\n                    Save\n                </JetButton>\n            </template>\n        </JetDialogModal>\n\n        <!-- Leave Team Confirmation Modal -->\n        <JetConfirmationModal :show=\"confirmingLeavingTeam\" @close=\"confirmingLeavingTeam = false\">\n            <template #title>\n                Leave Team\n            </template>\n\n            <template #content>\n                Are you sure you would like to leave this team?\n            </template>\n\n            <template #footer>\n                <JetSecondaryButton @click=\"confirmingLeavingTeam = false\">\n                    Cancel\n                </JetSecondaryButton>\n\n                <JetDangerButton\n                    class=\"ml-3\"\n                    :class=\"{ 'opacity-25': leaveTeamForm.processing }\"\n                    :disabled=\"leaveTeamForm.processing\"\n                    @click=\"leaveTeam\"\n                >\n                    Leave\n                </JetDangerButton>\n            </template>\n        </JetConfirmationModal>\n\n        <!-- Remove Team Member Confirmation Modal -->\n        <JetConfirmationModal :show=\"teamMemberBeingRemoved\" @close=\"teamMemberBeingRemoved = null\">\n            <template #title>\n                Remove Team Member\n            </template>\n\n            <template #content>\n                Are you sure you would like to remove this person from the team?\n            </template>\n\n            <template #footer>\n                <JetSecondaryButton @click=\"teamMemberBeingRemoved = null\">\n                    Cancel\n                </JetSecondaryButton>\n\n                <JetDangerButton\n                    class=\"ml-3\"\n                    :class=\"{ 'opacity-25': removeTeamMemberForm.processing }\"\n                    :disabled=\"removeTeamMemberForm.processing\"\n                    @click=\"removeTeamMember\"\n                >\n                    Remove\n                </JetDangerButton>\n            </template>\n        </JetConfirmationModal>\n    </div>\n</template>\n"],"names":["addTeamMemberForm","useForm","updateRoleForm","leaveTeamForm","removeTeamMemberForm","currentlyManagingRole","ref","managingRoleFor","confirmingLeavingTeam","teamMemberBeingRemoved","addTeamMember","props","cancelTeamInvitation","invitation","Inertia","manageRole","teamMember","updateRole","confirmLeavingTeam","leaveTeam","usePage","confirmTeamMemberRemoval","removeTeamMember","displayableRole","role","r"],"mappings":"ulGAuBMA,EAAoBC,EAAQ,CAC9B,MAAO,GACP,KAAM,IACV,CAAC,EAEKC,EAAiBD,EAAQ,CAC3B,KAAM,IACV,CAAC,EAEKE,EAAgBF,EAAO,EACvBG,EAAuBH,EAAO,EAE9BI,EAAwBC,EAAI,EAAK,EACjCC,EAAkBD,EAAI,IAAI,EAC1BE,EAAwBF,EAAI,EAAK,EACjCG,EAAyBH,EAAI,IAAI,EAEjCI,EAAgB,IAAM,CACxBV,EAAkB,KAAK,MAAM,qBAAsBW,EAAM,IAAI,EAAG,CAC5D,SAAU,gBACV,eAAgB,GAChB,UAAW,IAAMX,EAAkB,MAAO,CAClD,CAAK,CACL,EAEMY,EAAwBC,GAAe,CACzCC,EAAAA,QAAQ,OAAO,MAAM,2BAA4BD,CAAU,EAAG,CAC1D,eAAgB,EACxB,CAAK,CACL,EAEME,EAAcC,GAAe,CAC/BT,EAAgB,MAAQS,EACxBd,EAAe,KAAOc,EAAW,WAAW,KAC5CX,EAAsB,MAAQ,EAClC,EAEMY,EAAa,IAAM,CACrBf,EAAe,IAAI,MAAM,sBAAuB,CAACS,EAAM,KAAMJ,EAAgB,KAAK,CAAC,EAAG,CAClF,eAAgB,GAChB,UAAW,IAAMF,EAAsB,MAAQ,EACvD,CAAK,CACL,EAEMa,EAAqB,IAAM,CAC7BV,EAAsB,MAAQ,EAClC,EAEMW,EAAY,IAAM,CACpBhB,EAAc,OAAO,MAAM,uBAAwB,CAACQ,EAAM,KAAMS,EAAO,EAAG,MAAM,MAAM,IAAI,CAAC,CAAC,CAChG,EAEMC,EAA4BL,GAAe,CAC7CP,EAAuB,MAAQO,CACnC,EAEMM,EAAmB,IAAM,CAC3BlB,EAAqB,OAAO,MAAM,uBAAwB,CAACO,EAAM,KAAMF,EAAuB,KAAK,CAAC,EAAG,CACnG,SAAU,mBACV,eAAgB,GAChB,cAAe,GACf,UAAW,IAAMA,EAAuB,MAAQ,IACxD,CAAK,CACL,EAEMc,EAAmBC,GACdb,EAAM,eAAe,KAAKc,GAAKA,EAAE,MAAQD,CAAI,EAAE"}